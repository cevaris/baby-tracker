<form [formGroup]="taskRecordForm" autocomplete="off" novalidate
    fxLayout="column wrap" fxLayoutGap="10px">
    <!-- <mat-form-field>
        <input matInput type="text" placeholder="Link to shorten"
            formControlName="link" id="link">
        <mat-error id="error-link-required"
            *ngIf="hasError('link', 'required')">Link is required.
        </mat-error>
        <mat-error id="error-link-invalid" *ngIf="hasError('link', 'invalid')">
            {{linkForm.controls['link'].getError('invalid')}}
        </mat-error>
    </mat-form-field> -->

    <mat-error id="error-form" *ngIf="formError">
        {{formError}}
    </mat-error>

    <mat-form-field mat-line *ngFor="let kv of task.fields | keyvalue">
        <mat-label>{{kv.value.description}}</mat-label>
        <input matInput [formControlName]="kv.value.name"
            [type]="kv.value.description" [required]="kv.value.isRequired">
        <mat-error *ngIf="taskRecordForm.get(kv.value.name).hasError('number')">
            Not a number. Number is required.
        </mat-error>
    </mat-form-field>

    <button id="form-submit" (click)="onSubmit()" mat-flat-button
        color="primary" [disabled]="!taskRecordForm.valid || submitting">
        Add New Entry
    </button>

    <!-- <div *ngIf="submitting" fxLayoutAlign="center">
        <mat-spinner></mat-spinner>
    </div> -->
</form>